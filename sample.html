<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bakery Menu</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2d1b5a;
            color: #ffffff;
        }
        #menu, #cart, #order-form, #receipt {
            display: none;
        }
        #menu.active, #cart.active, #order-form.active, #receipt.active {
            display: block;
        }
        .category {
            margin-bottom: 20px;
        }
        .item {
            margin: 10px 0;
        }
        #cart-popup {
            display: none;
            position: fixed;
            top: 10%;
            right: 10%;
            width: 300px;
            background-color: #ffffff;
            color: #000000;
            border: 2px solid #2d1b5a;
            padding: 20px;
            box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.75);
        }
        #cart-icon {
            position: fixed;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
        .quantity-controls {
            display: inline-block;
            margin-left: 10px;
        }
        .notification {
            display: none;
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ff0000;
            color: #ffffff;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <main>
        <section id="menu" class="active">
            <h2>Our Menu</h2>
            <div class="category" id="brownies">
                <h3>Brownies</h3>
                <div class="item">
                    <span>Chocolate Brownie - $3.00</span>
                    <button onclick="addToCart('Chocolate Brownie', 3)">Add to Cart</button>
                </div>
                <!-- Add more items as needed -->
            </div>
            <div class="category" id="cupcakes">
                <h3>Cupcakes</h3>
                <div class="item">
                    <span>Vanilla Cupcake - $2.50</span>
                    <button onclick="addToCart('Vanilla Cupcake', 2.5)">Add to Cart</button>
                </div>
                <div class="item">
                    <span>Chocolate - $3.00</span>
                    <button onclick="addToCart('Chocolate', 3)">Add to Cart</button>
                </div>
                <!-- Add more items as needed -->
            </div>
            <button onclick="goToCart()">Continue</button>
            <!-- Add more categories as needed -->
        </section>

        <section id="cart">
            <h2>Your Order</h2>
            <ul id="cart-items"></ul>
            <p id="total-price">Total: $0.00</p>
            <button onclick="goToMenu()">Back to Menu</button>
            <button onclick="placeOrder()">Continue with order</button>
        </section>
        
        <div id="cart-popup">
            <h2>Your Cart</h2>
            <ul id="popup-cart-items"></ul>
        </div>
        <div id="notification">Please choose a product</div>
        <section id="order-form">
            <h2>Order Details</h2>
            <form id="order-forms" class="order-forms">
                <div class="details">
                    <label for="name">Name : </label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="details">
                    <label for="address">Address : </label>
                    <input type="text" id="address" name="address" required>
                </div>
                <div class="details">
                    <label for="phone">Phone : </label>
                    <input type="text" id="phone" name="phone" required>
                </div>
                <div class="details">
                    <label for="date">Delivery Date : </label>
                    <input type="text" class="delivery-date" id="delivery-date" name="delivery-date" placeholder="dd / mm / yyyy" required>
                </div>
                <div class="btns">
                    <button type="button" onclick="goToMenu()" class="menu-btn">Menu</button>
                    <button type="button" onclick="goToCart()" class="cart-btn">Back to Cart</button>
                    <button type="button" onclick="showReceipt()" class="submit-btn">Place your Order</button>
                </div>
            </form>
        </section>
        <section id="receipt">
            <h2>Receipt</h2>
            <p id="receipt-name"></p>
            <p id="receipt-address"></p>
            <p id="receipt-phone"></p>
            <p id="receipt-date"></p>
            <ul id="receipt-items"></ul>
            <p id="receipt-total"></p>
        </section>
        <div id="cart-icon" onclick="toggleCartPopup()">ðŸ›’</div>
        <div id="notification" class="notification">Please fill in all the details.</div>
    </main>

    <script>
        let cart = {};

        function addToCart(item, price) {
            if (cart[item]) {
                cart[item].quantity++;
            } else {
                cart[item] = { price, quantity: 1 };
            }
            renderCart();
        }

        function removeFromCart(item) {
            if (cart[item].quantity > 1) {
                cart[item].quantity--;
            } else {
                delete cart[item];
            }
            renderCart();
        }

        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            const popupCartItems = document.getElementById('popup-cart-items');
            const totalPrice = document.getElementById('total-price');
            let total = 0;

            cartItems.innerHTML = '';
            popupCartItems.innerHTML = '';

            for (const [item, { price, quantity }] of Object.entries(cart)) {
                const li = document.createElement('li');
                const value = price * quantity;
                total += value;
                li.innerHTML = `
                    ${item} - $${price.toFixed(2)} x ${quantity} = $${value.toFixed(2)}
                    <div class="quantity-controls">
                        <button onclick="removeFromCart('${item}')">-</button>
                        <button onclick="addToCart('${item}', ${price})">+</button>
                    </div>
                `;
                cartItems.appendChild(li);

                const popupLi = document.createElement('li');
                popupLi.textContent = `${item} - ${quantity}`;
                popupCartItems.appendChild(popupLi);
            }
            totalPrice.textContent = `Total: $${total.toFixed(2)}`;
        }

        function placeOrder() {
            if (Object.keys(cart).length === 0) {
                showNotification('Please choose a product.');
                setTimeout(hideNotification, 3000);
                goToMenu();
            } else {
                document.getElementById('cart').classList.remove('active');
                document.getElementById('order-form').classList.add('active');
            }
        }

        function goToCart() {
            document.getElementById('menu').classList.remove('active');
            document.getElementById('cart').classList.add('active');
            document.getElementById('order-form').classList.remove('active');
            document.getElementById('receipt').classList.remove('active');
        }

        function goToMenu() {
            document.getElementById('cart').classList.remove('active');
            document.getElementById('menu').classList.add('active');
            document.getElementById('order-form').classList.remove('active');
            document.getElementById('receipt').classList.remove('active');
        }

        function toggleCartPopup() {
            let cartPopup = document.getElementById('cart-popup');
            if (cartPopup.style.display === 'block') {
                cartPopup.style.display = 'none';
            } else {
                cartPopup.style.display = 'block';
                document.addEventListener('click', closeCartPopupOnClickOutside);
            }
        }

        function closeCartPopupOnClickOutside(event) {
            let cartPopup = document.getElementById('cart-popup');
            if (!cartPopup.contains(event.target) && event.target.id !== 'cart-icon') {
                cartPopup.style.display = 'none';
                document.removeEventListener('click', closeCartPopupOnClickOutside);
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
        }

        function hideNotification() {
            const notification = document.getElementById('notification');
            notification.style.display = 'none';
        }

        function showReceipt() {
            const name = document.getElementById('name').value;
            const address = document.getElementById('address').value;
            const phone = document.getElementById('phone').value;
            const date = document.getElementById('delivery-date').value;

            if (!name || !address || !phone || !date) {
                showNotification('Please fill in all the details.');
                setTimeout(hideNotification, 3000);
                return;
            }

            document.getElementById('receipt-name').textContent = `Name: ${name}`;
            document.getElementById('receipt-address').textContent = `Address: ${address}`;
            document.getElementById('receipt-phone').textContent = `Phone: ${phone}`;
            document.getElementById('receipt-date').textContent = `Delivery Date: ${date}`;

            const receiptItems = document.getElementById('receipt-items');
            const receiptTotal = document.getElementById('receipt-total');
            receiptItems.innerHTML = '';
            let total = 0;

            for (const [item, { price, quantity }] of Object.entries(cart)) {
                const li = document.createElement('li');
                const value = price * quantity;
                total += value;
                li.textContent = `${item} - $${price.toFixed(2)} x ${quantity} = $${value.toFixed(2)}`;
                receiptItems.appendChild(li);
            }

            receiptTotal.textContent = `Total: $${total.toFixed(2)}`;

            document.getElementById('order-form').classList.remove('active');
            document.getElementById('receipt').classList.add('active');
        }
    </script>

</body>
</html>
